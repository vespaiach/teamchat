import{a as be,b as X,c as he,d as Ce,e as R,f as xe}from"./common-DWFNPZE6.js";import{b as ue,e as K,f as ge,g as ve,l as G,n as fe}from"./common-7IHFL5F2.js";import{a as I,d as $,e as L,g as pe}from"./common-HPS6C7QP.js";import{a as l,b as S,c as Me,d as p,j as ce,k as s,m as E}from"./common-ATYGQR7Y.js";var Se=l(S(),1),Ee=l(Me(),1);var D=l(S(),1);var Ne=l(s(),1),Q=fe("logged-in-user");if(!Q)throw new Error("User data not found. Ensure the user data is embedded in the HTML.");var Te=(0,D.createContext)({loggedInUser:G(Q),setLoggedInUser:()=>{}});function ye({children:e}){let[r,n]=(0,D.useState)(G(Q));return(0,Ne.jsx)(Te.Provider,{value:{loggedInUser:r,setLoggedInUser:n},children:e})}function W(){let e=(0,D.useContext)(Te);if(!e)throw new Error("useProfilesStore must be used within a ProfilesStoreProvider");return e}var M=l(S(),1);var Ue=l(s(),1),Be={online:"bg-green-500",offline:"bg-gray-400"},Ie={small:"w-3 h-3",medium:"w-5 h-5",large:"w-6 h-6"};function z({status:e,size:r="small"}){return(0,Ue.jsx)("div",{className:p("rounded-full border border-white dark:border-gray-800",Be[e],Ie[r])})}var J=l(S(),1);var q=l(s(),1);function ee(e){return(0,q.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",...e,children:(0,q.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}var _=l(s(),1);function H(e){return(0,_.jsxs)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",...e,children:[(0,_.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),(0,_.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}var ae=l(s(),1);function re(e){return(0,ae.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",...e,children:(0,ae.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}var T=l(s(),1);function te({className:e,onCameraCapture:r,onFileUpload:n,disabled:i=!1}){let[a,d]=(0,J.useState)(!1),m=(0,J.useRef)(null),u=he(()=>{d(!1)}),y=()=>{i||(d(!1),r?.())},N=()=>{i||(d(!1),m.current?.click())},f=g=>{let U=g.target.files?.[0];U&&(n?.(U),g.target.value="")};return(0,T.jsxs)("div",{className:p("relative",e),children:[(0,T.jsx)("button",{onClick:()=>!i&&d(!a),disabled:i,className:p("absolute -bottom-1 -right-1 w-8 h-8 rounded-full","bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-600","hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200","flex items-center justify-center shadow-sm",i?"opacity-50 cursor-not-allowed":"cursor-pointer"),"aria-label":"Edit avatar",title:i?"Upload in progress...":"Edit avatar",children:(0,T.jsx)(ee,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}),a&&!i&&(0,T.jsxs)("div",{ref:u,className:p("absolute -right-2 top-8 w-48 z-50","bg-white dark:bg-gray-800 rounded-lg shadow-lg","border border-gray-200 dark:border-gray-700 py-1"),children:[(0,T.jsx)(X,{onClick:y,className:"text-gray-700 dark:text-gray-300",iconRNode:(0,T.jsx)(H,{className:"h-4 w-4"}),labelRNode:(0,T.jsx)("span",{children:"Take Photo"})}),(0,T.jsx)(X,{onClick:N,className:"text-gray-700 dark:text-gray-300",iconRNode:(0,T.jsx)(re,{className:"h-4 w-4"}),labelRNode:(0,T.jsx)("span",{children:"Upload Photo"})})]}),(0,T.jsx)("input",{ref:m,type:"file",accept:"image/jpeg,image/jpg,image/png,image/gif,image/webp",onChange:f,disabled:i,className:"hidden","aria-label":"Upload avatar image"})]})}var F=l(s(),1),Le={primary:"bg-blue-600",success:"bg-green-600",warning:"bg-yellow-600",danger:"bg-red-600"},ke={sm:"h-1",md:"h-2",lg:"h-3"};function le({progress:e,className:r="",showPercentage:n=!1,color:i="primary",size:a="md"}){let d=Math.min(Math.max(e,0),100);return(0,F.jsxs)("div",{className:p("w-full",r),children:[(0,F.jsx)("div",{className:p("bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",ke[a]),children:(0,F.jsx)("div",{className:p("transition-all duration-300 ease-out rounded-full",Le[i],ke[a]),style:{width:`${d}%`}})}),n&&(0,F.jsxs)("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 text-center",children:[Math.round(d),"%"]})]})}var w=l(S(),1);var o=l(s(),1);function oe({isOpen:e,onClose:r,onCapture:n}){let i=(0,w.useRef)(null),a=(0,w.useRef)(null),d=(0,w.useRef)(()=>{}),m=(0,w.useRef)(()=>{}),[u,y]=(0,w.useState)(null),[N,f]=(0,w.useState)(!1),[g,U]=(0,w.useState)(null);d.current=async()=>{try{U(null);let b=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:640},facingMode:"user"}});y(b),U(!0),i.current&&(i.current.srcObject=b)}catch(b){console.error("Camera access denied or not available:",b),U(!1),L("Camera access is required to take a photo. Please enable camera permissions.")}},m.current=()=>{u&&(u.getTracks().forEach(b=>b.stop()),y(null)),U(null)},(0,w.useEffect)(()=>(e?d.current():m.current(),()=>{m.current()}),[e]);let v=()=>{if(!i.current||!a.current)return;f(!0);let b=i.current,A=a.current,V=A.getContext("2d");if(!V)return;A.width=320,A.height=320;let j=b.videoWidth,O=b.videoHeight,B=Math.min(j,O),Y=(j-B)/2,me=(O-B)/2;V.drawImage(b,Y,me,B,B,0,0,320,320),A.toBlob(P=>{P&&(n(P),r(!1)),f(!1)},"image/jpeg",.8)},k=()=>{m.current(),r(!1)};return(0,o.jsx)(xe,{isOpen:e,onClose:k,title:"Take Profile Photo",size:"md",showCloseButton:!0,children:(0,o.jsxs)("div",{className:"p-6",children:[(0,o.jsxs)("div",{className:"text-center",children:[g===null&&(0,o.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,o.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Requesting camera access..."})]}),g===!1&&(0,o.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,o.jsx)("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/20 rounded-full flex items-center justify-center",children:(0,o.jsx)(H,{className:"w-8 h-8 text-red-600 dark:text-red-400"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Camera Access Required"}),(0,o.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Please allow camera access to take a profile photo."}),(0,o.jsx)(E,{onClick:d.current,variant:"primary",size:"sm",children:"Try Again"})]})]}),g===!0&&(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("video",{ref:i,autoPlay:!0,playsInline:!0,muted:!0,className:p("w-80 h-80 object-cover rounded-lg border-4 border-gray-200 dark:border-gray-600","mx-auto block"),style:{transform:"scaleX(-1)"}}),(0,o.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(0,o.jsx)("div",{className:"w-64 h-64 border-2 border-white rounded-full shadow-lg opacity-50"})}),N&&(0,o.jsx)("div",{className:"absolute inset-0 bg-white bg-opacity-80 rounded-lg flex items-center justify-center",children:(0,o.jsx)("div",{className:"text-gray-900 font-medium",children:"Capturing..."})})]}),(0,o.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:'Position yourself within the circle and click "Take Photo"'}),(0,o.jsxs)("div",{className:"flex space-x-3 justify-center",children:[(0,o.jsx)(E,{onClick:k,variant:"outline",size:"md",disabled:N,children:"Cancel"}),(0,o.jsx)(E,{onClick:v,variant:"primary",size:"md",disabled:N,leftIcon:(0,o.jsx)(H,{className:"w-4 h-4"}),children:N?"Capturing...":"Take Photo"})]})]})]}),(0,o.jsx)("canvas",{ref:a,className:"hidden"})]})})}var t=l(s(),1);function ie(){let{loggedInUser:e}=W(),[r,n]=(0,M.useState)(null),[i,a]=(0,M.useState)(0),[d,m]=(0,M.useState)(!1),[u,y]=(0,M.useState)(!1);(0,M.useEffect)(()=>{let v=new Image;v.onload=()=>{n(`/users/${e.id}/avatar`)},v.src=`/users/${e.id}/avatar`},[e]);let N=async()=>{y(!0)},f=v=>{U(v)},g=v=>{if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(v.type)){L("Please select a valid image file (JPEG, PNG, GIF, or WebP).");return}let b=10*1024*1024;if(v.size>b){L("File size must be less than 5MB.");return}U(v)},U=async v=>{try{m(!0),a(0);let k=new FormData;k.append("avatar",v),(await ve("/profile/avatar",k,A=>{a(A)})).success&&(n(`/users/${e.id}/avatar?t=${new Date().getTime()}`),$("Avatar updated successfully!"),a(100))}catch(k){console.error("Avatar upload failed:",k),L("Failed to upload avatar. Please try again.")}finally{setTimeout(()=>{m(!1),a(0)},1e3)}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(oe,{isOpen:u,onClose:y,onCapture:f}),(0,t.jsx)(R,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch md:flex-row gap-5",children:[(0,t.jsxs)("div",{className:"flex-1 flex flex-col sm:flex-row gap-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("div",{className:"relative w-32 h-32",children:[r&&(0,t.jsx)("img",{src:r,className:"w-full h-full rounded-full object-cover object-center"}),!r&&(0,t.jsxs)("div",{className:p("w-32 h-32 rounded-full border-4 border-gray-200 dark:border-gray-600","flex items-center justify-center text-3xl font-bold text-white bg-primary"),children:[e.firstName[0].toUpperCase(),e.lastName[0].toUpperCase()]}),(0,t.jsx)(te,{onCameraCapture:N,onFileUpload:g,disabled:d}),d&&(0,t.jsx)("div",{className:"absolute inset-0 bg-black/80 bg-opacity-50 rounded-full flex items-center justify-center",children:(0,t.jsx)("div",{className:"text-white text-xs font-medium",children:i<100?"Uploading...":"Complete!"})})]}),d&&(0,t.jsx)("div",{className:"mt-2 w-32",children:(0,t.jsx)(le,{progress:i,size:"sm",color:"primary",showPercentage:!1})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e.name}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:e.email}),(0,t.jsx)("div",{className:"flex items-center space-x-2 mt-1",children:(0,t.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:["Joined ",ce(e.joinedAt)]})}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,t.jsx)(z,{status:"online",size:"small"}),(0,t.jsx)("p",{className:"text-sm text-gray-900 dark:text-white",children:"Online"})]})]})]}),(0,t.jsx)("div",{className:"flex-1 md:mt-3",children:(0,t.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Profile Stats"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"12"}),(0,t.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Channels Joined"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"247"}),(0,t.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Messages Sent"})]})]})]})})]})})]})}var Z=l(S(),1);var we=l(S(),1);var C=l(s(),1),Re={sm:"px-3 py-2 text-sm",md:"px-3 py-3 text-base",lg:"px-4 py-4 text-lg"},De={default:"border border-gray-300 bg-white dark:border-gray-600 dark:bg-gray-900 dark:text-white",filled:"border border-gray-200 bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-white",outlined:"border-2 border-gray-300 bg-white dark:border-gray-600 dark:bg-gray-900 dark:text-white"};function se(e){let{label:r,error:n,helperText:i,variant:a="default",size:d="md",icon:m,iconPosition:u="left",fullWidth:y=!0,required:N=!1,className:f="",id:g,value:U="",disabled:v=!1,placeholder:k,options:b,onChange:A,onBlur:V,...j}=e,O=(0,we.useMemo)(()=>g||`dropdown-${Math.random().toString(36).substring(2,9)}`,[g]),B=p("rounded-lg transition-colors duration-200 outline-none","focus:ring-2 focus:ring-blue-500 focus:border-blue-500",Re[d],De[a],n?"border-red-500 focus:border-red-500 focus:ring-red-500":"",v?"opacity-50 cursor-not-allowed bg-gray-100 dark:bg-gray-800":"cursor-pointer",y?"w-full":"","appearance-none bg-no-repeat bg-right pr-10",m&&u==="left"?"pl-10":"",m&&u==="right"?"pr-16":""),Y=p("relative",y?"w-full":"inline-block",f);return(0,C.jsxs)("div",{...j,className:Y,children:[r&&(0,C.jsxs)("label",{htmlFor:O,className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[r,N&&(0,C.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,C.jsxs)("div",{className:"relative",children:[m&&u==="left"&&(0,C.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400",children:m}),(0,C.jsxs)("select",{id:O,value:U||"",disabled:v,onChange:P=>{A&&!v&&A(P.target.value)},onBlur:V,className:B,style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.5rem center",backgroundSize:"1.5em 1.5em"},children:[k&&(0,C.jsx)("option",{value:"",disabled:!0,children:k}),b.map(P=>(0,C.jsx)("option",{value:P.value,disabled:P.disabled,children:P.label},P.value))]}),m&&u==="right"&&(0,C.jsx)("div",{className:"absolute inset-y-0 right-8 pl-3 flex items-center pointer-events-none text-gray-400",children:m})]}),(n||i)&&(0,C.jsxs)("div",{className:"mt-2",children:[n&&(0,C.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:n}),i&&!n&&(0,C.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:i})]})]})}var Ae=[{value:"UTC",label:"(UTC+00:00) Coordinated Universal Time"},{value:"Africa/Abidjan",label:"(UTC+00:00) Abidjan"},{value:"Africa/Accra",label:"(UTC+00:00) Accra"},{value:"Africa/Addis_Ababa",label:"(UTC+03:00) Addis Ababa"},{value:"Africa/Algiers",label:"(UTC+01:00) Algiers"},{value:"Africa/Cairo",label:"(UTC+02:00) Cairo"},{value:"Africa/Casablanca",label:"(UTC+01:00) Casablanca"},{value:"Africa/Johannesburg",label:"(UTC+02:00) Johannesburg"},{value:"Africa/Lagos",label:"(UTC+01:00) Lagos"},{value:"Africa/Nairobi",label:"(UTC+03:00) Nairobi"},{value:"America/New_York",label:"(UTC-05:00) New York (Eastern Time)"},{value:"America/Chicago",label:"(UTC-06:00) Chicago (Central Time)"},{value:"America/Denver",label:"(UTC-07:00) Denver (Mountain Time)"},{value:"America/Los_Angeles",label:"(UTC-08:00) Los Angeles (Pacific Time)"},{value:"America/Anchorage",label:"(UTC-09:00) Anchorage (Alaska Time)"},{value:"America/Adak",label:"(UTC-10:00) Adak (Hawaii-Aleutian Time)"},{value:"Pacific/Honolulu",label:"(UTC-10:00) Honolulu (Hawaii Time)"},{value:"America/Toronto",label:"(UTC-05:00) Toronto (Eastern Time)"},{value:"America/Winnipeg",label:"(UTC-06:00) Winnipeg (Central Time)"},{value:"America/Edmonton",label:"(UTC-07:00) Edmonton (Mountain Time)"},{value:"America/Vancouver",label:"(UTC-08:00) Vancouver (Pacific Time)"},{value:"America/Halifax",label:"(UTC-04:00) Halifax (Atlantic Time)"},{value:"America/St_Johns",label:"(UTC-03:30) St. Johns (Newfoundland Time)"},{value:"America/Mexico_City",label:"(UTC-06:00) Mexico City"},{value:"America/Cancun",label:"(UTC-05:00) Cancun"},{value:"America/Tijuana",label:"(UTC-08:00) Tijuana"},{value:"America/Guatemala",label:"(UTC-06:00) Guatemala"},{value:"America/Costa_Rica",label:"(UTC-06:00) Costa Rica"},{value:"America/Panama",label:"(UTC-05:00) Panama"},{value:"America/Bogota",label:"(UTC-05:00) Bogot\xE1"},{value:"America/Lima",label:"(UTC-05:00) Lima"},{value:"America/Caracas",label:"(UTC-04:00) Caracas"},{value:"America/Guyana",label:"(UTC-04:00) Georgetown"},{value:"America/La_Paz",label:"(UTC-04:00) La Paz"},{value:"America/Santiago",label:"(UTC-03:00) Santiago"},{value:"America/Argentina/Buenos_Aires",label:"(UTC-03:00) Buenos Aires"},{value:"America/Montevideo",label:"(UTC-03:00) Montevideo"},{value:"America/Sao_Paulo",label:"(UTC-03:00) S\xE3o Paulo"},{value:"America/Fortaleza",label:"(UTC-03:00) Fortaleza"},{value:"America/Manaus",label:"(UTC-04:00) Manaus"},{value:"Asia/Tokyo",label:"(UTC+09:00) Tokyo"},{value:"Asia/Seoul",label:"(UTC+09:00) Seoul"},{value:"Asia/Shanghai",label:"(UTC+08:00) Shanghai"},{value:"Asia/Hong_Kong",label:"(UTC+08:00) Hong Kong"},{value:"Asia/Taipei",label:"(UTC+08:00) Taipei"},{value:"Asia/Singapore",label:"(UTC+08:00) Singapore"},{value:"Asia/Kuala_Lumpur",label:"(UTC+08:00) Kuala Lumpur"},{value:"Asia/Jakarta",label:"(UTC+07:00) Jakarta"},{value:"Asia/Bangkok",label:"(UTC+07:00) Bangkok"},{value:"Asia/Ho_Chi_Minh",label:"(UTC+07:00) Ho Chi Minh City"},{value:"Asia/Manila",label:"(UTC+08:00) Manila"},{value:"Asia/Kolkata",label:"(UTC+05:30) Kolkata (India)"},{value:"Asia/Colombo",label:"(UTC+05:30) Colombo"},{value:"Asia/Dhaka",label:"(UTC+06:00) Dhaka"},{value:"Asia/Kathmandu",label:"(UTC+05:45) Kathmandu"},{value:"Asia/Karachi",label:"(UTC+05:00) Karachi"},{value:"Asia/Dubai",label:"(UTC+04:00) Dubai"},{value:"Asia/Qatar",label:"(UTC+03:00) Doha"},{value:"Asia/Kuwait",label:"(UTC+03:00) Kuwait"},{value:"Asia/Riyadh",label:"(UTC+03:00) Riyadh"},{value:"Asia/Baghdad",label:"(UTC+03:00) Baghdad"},{value:"Asia/Tehran",label:"(UTC+03:30) Tehran"},{value:"Asia/Kabul",label:"(UTC+04:30) Kabul"},{value:"Asia/Tashkent",label:"(UTC+05:00) Tashkent"},{value:"Asia/Almaty",label:"(UTC+06:00) Almaty"},{value:"Europe/London",label:"(UTC+00:00) London (GMT)"},{value:"Europe/Dublin",label:"(UTC+00:00) Dublin"},{value:"Europe/Lisbon",label:"(UTC+00:00) Lisbon"},{value:"Europe/Madrid",label:"(UTC+01:00) Madrid"},{value:"Europe/Paris",label:"(UTC+01:00) Paris"},{value:"Europe/Brussels",label:"(UTC+01:00) Brussels"},{value:"Europe/Amsterdam",label:"(UTC+01:00) Amsterdam"},{value:"Europe/Berlin",label:"(UTC+01:00) Berlin"},{value:"Europe/Zurich",label:"(UTC+01:00) Zurich"},{value:"Europe/Rome",label:"(UTC+01:00) Rome"},{value:"Europe/Vienna",label:"(UTC+01:00) Vienna"},{value:"Europe/Prague",label:"(UTC+01:00) Prague"},{value:"Europe/Warsaw",label:"(UTC+01:00) Warsaw"},{value:"Europe/Budapest",label:"(UTC+01:00) Budapest"},{value:"Europe/Stockholm",label:"(UTC+01:00) Stockholm"},{value:"Europe/Oslo",label:"(UTC+01:00) Oslo"},{value:"Europe/Copenhagen",label:"(UTC+01:00) Copenhagen"},{value:"Europe/Helsinki",label:"(UTC+02:00) Helsinki"},{value:"Europe/Athens",label:"(UTC+02:00) Athens"},{value:"Europe/Istanbul",label:"(UTC+03:00) Istanbul"},{value:"Europe/Kiev",label:"(UTC+02:00) Kiev"},{value:"Europe/Moscow",label:"(UTC+03:00) Moscow"},{value:"Australia/Sydney",label:"(UTC+10:00) Sydney (AEST)"},{value:"Australia/Melbourne",label:"(UTC+10:00) Melbourne"},{value:"Australia/Brisbane",label:"(UTC+10:00) Brisbane"},{value:"Australia/Perth",label:"(UTC+08:00) Perth"},{value:"Australia/Adelaide",label:"(UTC+09:30) Adelaide"},{value:"Australia/Darwin",label:"(UTC+09:30) Darwin"},{value:"Australia/Hobart",label:"(UTC+10:00) Hobart"},{value:"Pacific/Auckland",label:"(UTC+12:00) Auckland"},{value:"Pacific/Fiji",label:"(UTC+12:00) Fiji"},{value:"Pacific/Guam",label:"(UTC+10:00) Guam"},{value:"Pacific/Tahiti",label:"(UTC-10:00) Tahiti"},{value:"Pacific/Marquesas",label:"(UTC-09:30) Marquesas"},{value:"Pacific/Gambier",label:"(UTC-09:00) Gambier"},{value:"Pacific/Pitcairn",label:"(UTC-08:00) Pitcairn"},{value:"Pacific/Easter",label:"(UTC-06:00) Easter Island"},{value:"Pacific/Galapagos",label:"(UTC-06:00) Gal\xE1pagos"}].sort((e,r)=>{let n=i=>{let a=i.match(/UTC([+-]\d{2}:\d{2})/);if(!a)return 0;let[,d]=a,[m,u]=d.split(":");return parseInt(m)*60+parseInt(u)*(m.startsWith("-")?-1:1)};return n(e.label)-n(r.label)});var x=l(s(),1);function ze(e,r){if(!r||r.trim()==="")return`${e==="firstName"?"First name":"Last name"} is required`}function He(e,r){switch(r.type){case"SET_FIELD":if(r.field==="firstName"||r.field==="lastName"){let n=ze(r.field,r.value);return{...e,[r.field]:r.value,errors:{...e.errors,[r.field]:n}}}return{...e,[r.field]:r.value};case"RESET":return Pe(r.value);default:return e}}function ne(){let[e,r]=(0,Z.useState)(!1),{loggedInUser:n,setLoggedInUser:i}=W(),[a,d]=(0,Z.useReducer)(He,Pe(n)),m=`${a.firstName}${a.lastName}${a.role??""}${a.department||""}${a.timezone}`!==a.origin,u=f=>g=>{d({type:"SET_FIELD",field:f,value:g.target.value})},y=()=>d({type:"RESET",value:n}),N=async()=>{if(a.errors.firstName||a.errors.lastName||e)return;r(!0);let f=await K("/profile",{user:{first_name:a.firstName,last_name:a.lastName,role:a.role,department:a.department,time_zone:a.timezone}});if(r(!1),f.success){let g=G(f.data);d({type:"RESET",value:g}),i(g),$("Profile updated successfully")}};return(0,x.jsxs)(R,{className:"flex-1 p-6",children:[(0,x.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6",children:"Personal Information"}),(0,x.jsxs)("div",{className:"space-y-4",children:[(0,x.jsx)(I,{label:"First name",value:a.firstName,onChange:u("firstName"),error:a.errors.firstName,required:!0,disabled:e}),(0,x.jsx)(I,{label:"Last name",value:a.lastName,onChange:u("lastName"),error:a.errors.lastName,disabled:e,required:!0}),(0,x.jsx)(I,{label:"Email",value:a.email,required:!0,disabled:!0}),(0,x.jsx)(I,{label:"Role",value:a.role,onChange:u("role"),disabled:e}),(0,x.jsx)(I,{label:"Department",value:a.department,onChange:u("department"),disabled:e}),(0,x.jsx)(se,{label:"Timezone",value:a.timezone,required:!0,onChange:f=>d({type:"SET_FIELD",field:"timezone",value:f}),options:Ae,disabled:e}),(0,x.jsxs)("div",{className:"flex items-center gap-4 mt-6",children:[(0,x.jsx)(E,{variant:"primary",className:"w-20",disabled:!m||e,onClick:N,loading:e,children:"Save"}),m&&(0,x.jsx)(E,{variant:"outline",className:"w-20",disabled:e,loading:e,onClick:y,children:"Cancel"})]})]})]})}function Pe(e){return console.log("initFormData",e),{firstName:e.firstName,lastName:e.lastName,email:e.email,role:e.role||"",department:e.department||"",origin:`${e.firstName}${e.lastName}${e.role??""}${e.department||""}${e.timezone}`,timezone:e.timezone,errors:{}}}var c=l(s(),1);function de(){let e=r=>{K("/profile",{status:r})};return(0,c.jsxs)(R,{className:"flex-1 p-6",children:[(0,c.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6",children:"Status"}),(0,c.jsxs)("div",{className:"space-y-4",children:[(0,c.jsxs)("div",{className:"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700",role:"menuitem",onClick:()=>{e("online")},children:[(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)(z,{status:"online",size:"small"}),(0,c.jsx)("p",{className:"text-sm text-gray-900 dark:text-white",children:"Online"})]}),(0,c.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Available to chat"})]}),(0,c.jsxs)("div",{className:"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700",role:"menuitem",onClick:()=>{e("online")},children:[(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)(z,{status:"offline",size:"small"}),(0,c.jsx)("p",{className:"text-sm text-gray-900 dark:text-white",children:"Offline"})]}),(0,c.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Available to chat"})]}),(0,c.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[(0,c.jsx)("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Current Status"}),(0,c.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,c.jsx)("div",{className:"flex items-center space-x-2",children:(0,c.jsx)("div",{className:"w-3 h-3 rounded-full bg-green-500 border-2 border-white dark:border-gray-800"})}),(0,c.jsx)("div",{children:(0,c.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Online"})})]})]})]})]})}var h=l(s(),1);function Fe(){return(0,h.jsxs)("div",{className:"page-container",children:[(0,h.jsx)(Ce,{pageTitle:"Profile",onBack:()=>{window.location.href="/home"},children:(0,h.jsx)(ue,{icon:(0,h.jsx)(be,{className:"h-6 w-6"}),onClick:async()=>{await ge("/signout"),window.location.href="/signin"}})}),(0,h.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,h.jsx)(ie,{}),(0,h.jsxs)("div",{className:"mt-6 flex md:flex-row flex-col gap-6",children:[(0,h.jsx)(ne,{}),(0,h.jsx)(de,{})]})]})]})}(0,Ee.createRoot)(document.getElementById("root")).render((0,h.jsx)(Se.StrictMode,{children:(0,h.jsxs)(ye,{children:[(0,h.jsx)(Fe,{}),(0,h.jsx)(pe,{})]})}));export{Fe as Profiles};
